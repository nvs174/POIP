:figure-caption: Рисунок
:table-caption: Таблица

include::Tityl_list_3.adoc[lines=1..10]
[.text-right]

Лабораторная работа 2
include::Tityl_list_3.adoc[lines="12..25"]


<<Цель отчета>>

<<Регистр>>

<<Работа с кодом>>

<<Вывод по работе>>

== Цель отчета

. Изучить Регистры
. Изучить регистр общего назначения:
.. Операторные регистр
.. Вспомогательные регистры
.. Специальные регистры

. Выполнить работу с регистрами периферии через обертку на С++ и через адресуемую ячейка памяти

== Регистр

* Регистры – это специальные ячейки памяти, расположенные непосредственно в процессоре. Работа с регистрами выполняется намного быстрее, чем с ячейками оперативной памяти, поэтому регистры активно используются как в программах на языке ассемблера, так и компиляторами языков высокого уровня.

.. Существуют регистры общего назначения и специальные регистры. Регистры общего назначения расположены внутри ядра микроконтроллера (сверхбыстрая память)

.. Регистры общего назначения - это сверхбыстрая память внутри процессора, предназначенная для хранения адресов и промежуточных результатов вычислений (регистр общего назначения/регистр данных) или данных, необходимых для работы самого процессора.

.. Регистры специального назначения расположены в ОЗУ микроконтроллера и используются для управления процессором и периферийными устройствами.

.. Каждый регистр в архитектуре ARM представляет собой ресурс памяти и имеет длину в 32 бита, где каждый бит можно представить в виде выключателя с помощью которого осуществляется управление тем или иным параметром микроконтроллера.

[#Регистр]
.Изображение регистра
image::Picter/Figure1.png[]

* Регистры общего назначения
С точки зрения прикладного программиста, процессор располагает 16-ю 32-разрядными регистрами общего назначения (РОН, GPR), из которых три на деле имеют специальные функции:

* [*] Оперативные регистры
* [*] Вспомогательные регистры
* [*] Специальные регистры

* Оперативные регистры 
. регистры R0-R3, R12 являются оперативными (sratch) регистрами;
. любая функция может использовать эти регистры по своему усмотрению и уничтожать содержимое этих регистров;
. если функции нужны значения этих регистров после вызова другой функции, она должна сохранить их на стеке, а после вызова восстановить.

* Вспомогательные регистры
. регистры от R4-R11 являются вспомогательными;
. любая функция должна сохранить их на входе, а при выходе восстановить их значение.

* Специальные регистры
. регистр указателя на стек R13/SP, должен всегда указывать на последний элемент стека
или ниже него;
. регистр R15/PC есть программный счетчик;
. регистр R14/LR, содержит адрес возврата функции.

* В регистр специального назачения входят:

* [*] Название регистра;

* [*] Адрес регистра обозначается 32-битным шестнадцатеричным числом;

* [*] Тип доступа к ячейкам регистра;

* [*] Длина - количество ячеек в одном регистре. Мы будем работать с 32-битными регистрами;

* [*] Поле - набор ячеек регистра, отвечающих за работу одной из функции микроконтроллера;

* [*] Значение поля - есть пространство всех возможных величин, которые может принимать поле.

== Работа с кодом

* Так как регистр специального назначения - это просто адресуемая ячейка памяти, то в коде это может мы можем обратиться к данным по этому адресу, разыменовывая указатель, указывающий на этот адрес:




[source, cpp]
----
int main() 
{
  int c = 463 ;
  int* ptr = &c ;
  return 0;
}
----



